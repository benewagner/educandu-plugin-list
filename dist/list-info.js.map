{
  "version": 3,
  "sources": ["../src/list-info.js"],
  "sourcesContent": ["import joi from 'joi';\r\nimport React from 'react';\r\nimport ListIcon from './list-icon.js';\r\nimport uniqueId from '@educandu/educandu/utils/unique-id.js';\r\nimport cloneDeep from '@educandu/educandu/utils/clone-deep.js';\r\nimport { couldAccessUrlFromRoom } from '@educandu/educandu/utils/source-utils.js';\r\nimport GithubFlavoredMarkdown from '@educandu/educandu/common/github-flavored-markdown.js';\r\n\r\nclass ListInfo {\r\n  static dependencies = [GithubFlavoredMarkdown];\r\n\r\n  static typeName = 'benewagner/educandu-plugin-list';\r\n\r\n  constructor(gfm) {\r\n    this.gfm = gfm;\r\n  }\r\n\r\n  getDisplayName(t) {\r\n    return t('benewagner/educandu-plugin-list:name');\r\n  }\r\n\r\n  getIcon() {\r\n    return <ListIcon />;\r\n  }\r\n\r\n  async resolveDisplayComponent() {\r\n    return (await import('./list-display.js')).default;\r\n  }\r\n\r\n  async resolveEditorComponent() {\r\n    return (await import('./list-editor.js')).default;\r\n  }\r\n\r\n  getItemTemplateInputTemplate() {\r\n    return {\r\n      key: uniqueId.create(),\r\n      label: '',\r\n      value: ''\r\n    };\r\n  }\r\n\r\n  getDefaultContent() {\r\n    return {\r\n      itemTemplate: {\r\n        display: '',\r\n        inputs: []\r\n      },\r\n      csvData: [[]],\r\n      customLabels: [],\r\n      listName: '',\r\n      items: [],\r\n      searchTags: [],\r\n      isCC0Music: false,\r\n      renderSearch: true\r\n    };\r\n  }\r\n\r\n  validateContent(content) {\r\n    const schema = joi.object({\r\n      itemTemplate: joi.object(),\r\n      listName: joi.string().allow('').required(),\r\n      items: joi.array().required(),\r\n      searchTags: joi.array(),\r\n      csvData: joi.array(),\r\n      customLabels: joi.array(),\r\n      isCC0Music: joi.boolean().required(),\r\n      renderSearch: joi.boolean().required()\r\n    });\r\n\r\n    joi.attempt(content, schema, { abortEarly: false, convert: false, noDefaults: true });\r\n  }\r\n\r\n  cloneContent(content) {\r\n    return cloneDeep(content);\r\n  }\r\n\r\n  redactContent(content, targetRoomId) {\r\n    const redactedContent = cloneDeep(content);\r\n\r\n    redactedContent.text = this.gfm.redactCdnResources(\r\n      redactedContent.text,\r\n      url => couldAccessUrlFromRoom(url, targetRoomId) ? url : ''\r\n    );\r\n\r\n    return redactedContent;\r\n  }\r\n\r\n  getCdnResources(content) {\r\n    return this.gfm.extractCdnResources(content.text);\r\n  }\r\n}\r\n\r\nexport default ListInfo;\r\n"],
  "mappings": "AAAA,OAAO,SAAS;AAChB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,eAAe;AACtB,SAAS,8BAA8B;AACvC,OAAO,4BAA4B;AAEnC,MAAM,SAAS;AAAA,EACb,OAAO,eAAe,CAAC,sBAAsB;AAAA,EAE7C,OAAO,WAAW;AAAA,EAElB,YAAY,KAAK;AACf,SAAK,MAAM;AAAA,EACb;AAAA,EAEA,eAAe,GAAG;AAChB,WAAO,EAAE,sCAAsC;AAAA,EACjD;AAAA,EAEA,UAAU;AACR,WAAO,oCAAC,cAAS;AAAA,EACnB;AAAA,EAEA,MAAM,0BAA0B;AAC9B,YAAQ,MAAM,OAAO,mBAAmB,GAAG;AAAA,EAC7C;AAAA,EAEA,MAAM,yBAAyB;AAC7B,YAAQ,MAAM,OAAO,kBAAkB,GAAG;AAAA,EAC5C;AAAA,EAEA,+BAA+B;AAC7B,WAAO;AAAA,MACL,KAAK,SAAS,OAAO;AAAA,MACrB,OAAO;AAAA,MACP,OAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,WAAO;AAAA,MACL,cAAc;AAAA,QACZ,SAAS;AAAA,QACT,QAAQ,CAAC;AAAA,MACX;AAAA,MACA,SAAS,CAAC,CAAC,CAAC;AAAA,MACZ,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,OAAO,CAAC;AAAA,MACR,YAAY,CAAC;AAAA,MACb,YAAY;AAAA,MACZ,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,gBAAgB,SAAS;AACvB,UAAM,SAAS,IAAI,OAAO;AAAA,MACxB,cAAc,IAAI,OAAO;AAAA,MACzB,UAAU,IAAI,OAAO,EAAE,MAAM,EAAE,EAAE,SAAS;AAAA,MAC1C,OAAO,IAAI,MAAM,EAAE,SAAS;AAAA,MAC5B,YAAY,IAAI,MAAM;AAAA,MACtB,SAAS,IAAI,MAAM;AAAA,MACnB,cAAc,IAAI,MAAM;AAAA,MACxB,YAAY,IAAI,QAAQ,EAAE,SAAS;AAAA,MACnC,cAAc,IAAI,QAAQ,EAAE,SAAS;AAAA,IACvC,CAAC;AAED,QAAI,QAAQ,SAAS,QAAQ,EAAE,YAAY,OAAO,SAAS,OAAO,YAAY,KAAK,CAAC;AAAA,EACtF;AAAA,EAEA,aAAa,SAAS;AACpB,WAAO,UAAU,OAAO;AAAA,EAC1B;AAAA,EAEA,cAAc,SAAS,cAAc;AACnC,UAAM,kBAAkB,UAAU,OAAO;AAEzC,oBAAgB,OAAO,KAAK,IAAI;AAAA,MAC9B,gBAAgB;AAAA,MAChB,SAAO,uBAAuB,KAAK,YAAY,IAAI,MAAM;AAAA,IAC3D;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,gBAAgB,SAAS;AACvB,WAAO,KAAK,IAAI,oBAAoB,QAAQ,IAAI;AAAA,EAClD;AACF;AAEA,IAAO,oBAAQ;",
  "names": []
}
